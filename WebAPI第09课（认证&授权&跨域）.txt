sys--->iis(isapi)-->asp.net(管线 httpModule)--->httpHandler（太多冗余代码）换成了HttpRouteHandler


System.Web.dll 2M多。很多冗余的代码。

宿主---》owin(中间件1----中间件2---)--->webapi管线（Hander）---->执行webapi


认证和授权
认证：用户是谁，什么角色，确定用户的身份
授权：这个人或者这个角色有什么养的权限，访问能力，对于已经认证的用户分配操作权限
      有三个元素组成
       主体------操作---------资源


认证：windwos认证，form认证，http basic，http摘要身份认证


基于令牌的身份认证  --首次登陆，生成一个sessionid，加密后，写在客户端，每次请求，就带上。
令牌的身份认证 特点：
过期时间：

SAML 令牌格式
jwt json web token
    会有三段，第一段，加密类型，第二段数据，第三段 加密后的md5信息，防止前面两端数据修改，防篡改
hawk
不要在webapi 支持cookie，因为cookie只支持浏览器，不支持安卓，ios，客户端，
可以使用jwt token的方式做

======================授权=============================
主体：客户端身份
操作：get、post、delete、put
资源：http资源（图片，json，用户）

授权过程有两个重要的因素：策略、决定和执行

匿名用户不能查询订单

群资料只能由群主修改

群主 【主题】
修改【操作】
资料：【资源】

决定：主要是衡量一个由（主题，操作和资源）三元组定义的访问是否符合授权策略

授权执行,拦截本次操作只确保执行有权限的资源，一种机制，比如webapi过滤器


           策略
           |
	   |
         授权决定
            |     
            |   
主体-----》授权执行---------》资源




跨域
JsonP和cors【w3c的标准】

jsonp： 

cors：
可以在微软官网查找cors的实现方式。

















